#!/bin/bash

#SBATCH --time=1:00:00          # walltime
#SBATCH --ntasks=1              # number of processor cores (i.e. tasks)
#SBATCH --nodes=1               # number of nodes
#SBATCH --mem-per-cpu=6G        # memory per CPU core
#SBATCH --job-name=ekp_init     # job name
#SBATCH --partition=serc        # partition
#SBATCH --output=/scratch/users/lauraman/MiMA/ekp_jobs/ekp_init_%j.out
#SBATCH --error=/scratch/users/lauraman/MiMA/ekp_jobs/ekp_init_%j.err

#julia package management
#module load julia/1.5.2 hdf5/1.10.1 netcdf-c/4.6.1 openmpi/4.0.1
module load julia hdf5 netcdf openmpi

julia --project -e 'using Pkg; Pkg.instantiate(); Pkg.API.precompile()'

julia --project init_calibration.jl
echo 'Ensemble initialized for calibration.'
mv mima_param_defs* ${SCRATCH}/MiMA/ekp_runs/
